@PACKAGE_INIT@

# CMake module used to specify dependencies that should be propagated to
# consumers of the package
include(CMakeFindDependencyMacro)

# Package root directory
set(OOMPH_ROOT_DIR "@OOMPH_ROOT_DIR@")
set(OOMPH_CMAKE_MODULE_DIR "${OOMPH_ROOT_DIR}/cmake")

# Compile definitions generated by oomph-lib. These definitions will be required
# by a consumer of the package to correctly build code provided by oomph-lib.
set(OOMPH_COMPILE_DEFINITIONS @OOMPH_COMPILE_DEFINITIONS@)

# Capture general values from the configuration step that may be required by the
# user (mainly for the demo drivers)
set(HAVE_ARPACK_SOURCES @HAVE_ARPACK_SOURCES@)
# set(HAVE_DARWIN, ...)
set(WANT_EIGENPROBLEM_TESTS ${HAVE_ARPACK_SOURCES})
set(HAVE_HSL_SOURCES @HAVE_HSL_SOURCES@)
set(HAVE_MALLOCH @OOMPH_HAS_MALLOCH@)
# set(WANT_MPI_VARIABLENP ...)
set(HAVE_STACKTRACE @OOMPH_HAS_STACKTRACE@)
set(HAVE_UNISTDH @OOMPH_HAS_UNISTDH@)
set(OOMPH_SUPPRESSED_TRIANGLE_LIB @SUPPRESS_TRIANGLE_LIB@)
set(OOMPH_SUPPRESSED_TETGEN_LIB @SUPPRESS_TETGEN_LIB@)

# Capture values from the configuration step to determine which dependencies
# should be forwarded to the user
set(OOMPH_HAS_MPI @OOMPH_ENABLE_MPI@)
set(OOMPH_HAS_CGAL @OOMPH_WANT_CGAL@)
set(OOMPH_HAS_HYPRE @OOMPH_WANT_HYPRE@)
set(OOMPH_HAS_MUMPS @OOMPH_WANT_MUMPS@)
set(OOMPH_HAS_TRILINOS @OOMPH_WANT_TRILINOS@)
set(OOMPH_HAS_NLOHMANN_JSON @OOMPH_WANT_NLOHMANN_JSON@)

# Forward library dependencies to the library consumer:

# Python3 for self-tests
find_dependency(Python3 QUIET)

# MPI for MPI-enabled functionality
if(OOMPH_HAS_MPI)
  find_dependency(MPI REQUIRED)
  set(MPI_RUN_COMMAND "@MPI_RUN_COMMAND@")
  set(MPI_VARIABLENP_RUN_COMMAND "@MPI_VARIABLENP_RUN_COMMAND@")
endif()

# Third-party libraries we built. Make sure to also check whether the dependency
# has already been found otherwise these dependency checks can be called again
# and again unnecessarily
if(OOMPH_HAS_TRILINOS AND NOT Trilinos_FOUND)
  find_dependency(Trilinos 11.8.1 REQUIRED)
endif()
if(OOMPH_HAS_MUMPS AND NOT MUMPS_FOUND)
  find_dependency(MUMPS 5.4.0 REQUIRED)
endif()
if(OOMPH_HAS_NLOHMANN_JSON AND NOT nlohmann_json_FOUND)
  find_dependency(nlohmann_json 3.9.1 REQUIRED)
endif()
if(OOMPH_HAS_CGAL AND NOT CGAL_FOUND)
  find_dependency(CGAL 5.2.2 REQUIRED)
endif()

include("${CMAKE_CURRENT_LIST_DIR}/@PROJECT_NAME@Exports.cmake")

# TODO: Update this to check for all of the desired components...
check_required_components("@PROJECT_NAMESPACE@")

include("${CMAKE_CURRENT_LIST_DIR}/OomphAddExecutable.cmake")
include("${CMAKE_CURRENT_LIST_DIR}/OomphAddTest.cmake")
